<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>AkÄ±llÄ± KÃ¼tÃ¼phane | Admin Paneli</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h2 class="mb-4">ðŸ“‹ KÃ¼tÃ¼phane Genel Takip Paneli</h2>
        
        <div class="card shadow">
            <div class="card-header bg-primary text-white">TÃ¼m Ã–dÃ¼nÃ§ ve Ceza KayÄ±tlarÄ±</div>
            <div class="card-body">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>KullanÄ±cÄ±</th>
                            <th>Kitap</th>
                            <th>Ã–dÃ¼nÃ§ Tarihi</th>
                            <th>Ä°ade Tarihi</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody id="adminTablo">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        async function tumVerileriGetir() {
            const response = await fetch('/api/admin/tum-oduncler');
            const oduncler = await response.json();
            const tablo = document.getElementById('adminTablo');
            
            tablo.innerHTML = oduncler.map(o => `
                <tr>
                    <td>${o.kullanici.ad} ${o.kullanici.soyad}</td>
                    <td>${o.kitap.kitapAdi}</td>
                    <td>${new Date(o.oduncTarihi).toLocaleString()}</td>
                    <td>${o.iadeTarihi ? new Date(o.iadeTarihi).toLocaleString() : '<span class="badge bg-warning">Elde</span>'}</td>
                    <td>${o.iadeTarihi ? '<span class="badge bg-success">Ä°ade Edildi</span>' : '<span class="badge bg-danger">Teslim Edilmedi</span>'}</td>
                </tr>
            `).join('');
        }
        tumVerileriGetir();
    </script>
</body>
</html>